Feature: SetTiming
	In order to have a broadcast run the next time
	I need to calculate the next report period to cover 
	And the next time the broadcast will run

Scenario: Broadcast Scheduled Back Office Frequency Monthly 
	Given I have a broadcast scheduled for 'Back Office'
		And the broadcast frequency is 'Monthly'
		And the day of the month the report runs on is '15'
		And the month starts on day '1'
		And the current report period start is '10/1/2016'
		And the current report period end is '10/31/2016'
		And the current next run is '11/15/2016'
		And the actual time the broadcast runs is '11/15/2016 00:05:00'
		And the broadcast last ran on '10/15/2016 00:05:00'
	When I calculate the new timing
	Then the last report period start is '10/1/2016'
		And the last report period end is '10/31/2016'
		And the next report period start is '11/1/2016'
		And the next report period end is '11/30/2016'
		And the next run is '12/15/2016'

Scenario: Broadcast Scheduled Reservation Frequency Monthly 
	Given I have a broadcast scheduled for 'Reservation'
		And the broadcast frequency is 'Monthly'
		And the day of the month the report runs on is '15'
		And the month starts on day '1'
		And the current report period start is '12/1/2016'
		And the current report period end is '12/31/2016'
		And the current next run is '11/15/2016'
		And the actual time the broadcast runs is '11/15/2016 00:05:00'
		And the broadcast last ran on '10/15/2016 00:05:00'
		And the current last report period start is '11/1/2016'
		And the current last report period end is '11/30/2016'
	When I calculate the new timing
	Then the last report period start is '12/1/2016'
		And the last report period end is '12/31/2016'
		And the next report period start is '1/1/2017'
		And the next report period end is '1/31/2017'
		And the next run is '12/15/2016'

Scenario: Broadcast Scheduled Back Office Frequency Bi-Monthly 
	Given I have a broadcast scheduled for 'Back Office'
		And the broadcast frequency is 'Bi-Monthly'
		And the day of the month the report runs on is '15'
		And the month starts on day '1'
		And the current report period start is '11/1/2016'
		And the current report period end is '12/31/2016'
		And the current next run is '1/15/2017'
		And the actual time the broadcast runs is '1/15/2017 00:05:00'
		And the broadcast last ran on '11/15/2016 00:05:00'
	When I calculate the new timing
	Then the last report period start is '11/1/2016'
		And the last report period end is '12/31/2016'
		And the next report period start is '1/1/2017'
		And the next report period end is '2/28/2017'
		And the next run is '3/15/2017'

Scenario: Broadcast Scheduled Reservation Frequency Bi-Monthly 
	Given I have a broadcast scheduled for 'Reservation'
		And the broadcast frequency is 'Bi-Monthly'
		And the day of the month the report runs on is '15'
		And the month starts on day '1'
		And the current report period start is '2/1/2017'
		And the current report period end is '3/31/2017'
		And the current next run is '1/15/2017'
		And the actual time the broadcast runs is '1/15/2017 00:05:00'
		And the broadcast last ran on '11/15/2016 00:05:00'
	When I calculate the new timing
	Then the last report period start is '2/1/2017'
		And the last report period end is '3/31/2017'
		And the next report period start is '4/1/2017'
		And the next report period end is '5/31/2017'
		And the next run is '3/15/2017'

Scenario: Broadcast Scheduled Back Office Frequency Daily
Given I have a broadcast scheduled for 'Back Office'
	And the broadcast frequency is 'Daily'
	And the current report period start is '12/12/2016'
	And the current report period end is '12/12/2016'
	And the current next run is '12/13/2016'
	And the actual time the broadcast runs is '12/13/2016 00:05:00'
	And the broadcast last ran on '12/12/2016 00:05:00'
	And the current last report period start is '12/11/2016'
	And the current last report period end is '12/11/2016'
When I calculate the new timing
Then the last report period start is '12/12/2016'
	And the last report period end is '12/12/2016'
	And the next report period start is '12/13/2016'
	And the next report period end is '12/13/2016'
	And the next run is '12/14/2016'

Scenario: Broadcast Scheduled Reservation Frequency Daily
Given I have a broadcast scheduled for 'Reservation'
	And the broadcast frequency is 'Daily'
	And the current report period start is '12/14/2016'
	And the current report period end is '12/14/2016'
	And the current next run is '12/13/2016'
	And the actual time the broadcast runs is '12/13/2016 00:05:00'
	And the broadcast last ran on '12/12/2016 00:05:00'
	And the current last report period start is '12/13/2016'
	And the current last report period end is '12/13/2016'
When I calculate the new timing
Then the last report period start is '12/14/2016'
	And the last report period end is '12/14/2016'
	And the next report period start is '12/15/2016'
	And the next report period end is '12/15/2016'
	And the next run is '12/14/2016'

Scenario: Broadcast Scheduled Back Office Frequency Weekly Run On Sunday Week Starts On Monday
Given I have a broadcast scheduled for 'Back Office'
	And the broadcast frequency is 'Weekly'
	And the report run day is 'Sunday'
	And the week starts on 'Monday'
	And the current report period start is '12/5/2016'
	And the current report period end is '12/11/2016'
	And the current next run is '12/11/2016'
	And the actual time the broadcast runs is '12/11/2016 00:05:00'
	And the broadcast last ran on '12/4/2016 00:05:00'
	And the current last report period start is '11/28/2016'
	And the current last report period end is '12/4/2016'
When I calculate the new timing
Then the last report period start is '12/5/2016'
	And the last report period end is '12/11/2016'
	And the next report period start is '12/12/2016'
	And the next report period end is '12/18/2016'
	And the next run is '12/18/2016'

Scenario: Broadcast Scheduled Back Office Frequency Weekly Run on Monday Week Starts on Monday
Given I have a broadcast scheduled for 'Back Office'
	And the broadcast frequency is 'Weekly'
	And the report run day is 'Monday'
	And the week starts on 'Monday'
	And the current report period start is '3/20/2017'
	And the current report period end is '3/26/2017'
	And the current next run is '3/27/2016'
	And the actual time the broadcast runs is '4/3/2017 17:34:00'
	And the broadcast last ran on '1/1/1900'
	And the current last report period start is '1/1/1900'
	And the current last report period end is '1/1/1900'
When I calculate the new timing
Then the last report period start is '3/20/2017'
	And the last report period end is '3/26/2017'
	And the next report period start is '3/27/2017'
	And the next report period end is '4/2/2017'
	And the next run is '4/3/2017'

Scenario: Broadcast Scheduled Back Office Frequency Weekly Run On Tuesday Week Starts On Sunday
Given I have a broadcast scheduled for 'Back Office'
	And the broadcast frequency is 'Weekly'
	And the report run day is 'Tuesday'
	And the week starts on 'Sunday'
	And the current report period start is '12/4/2016'
	And the current report period end is '12/10/2016'
	And the current next run is '12/13/2016'
	And the actual time the broadcast runs is '12/13/2016 00:05:00'
	And the broadcast last ran on '12/6/2016 00:05:00'
	And the current last report period start is '11/27/2016'
	And the current last report period end is '12/3/2016'
When I calculate the new timing
Then the last report period start is '12/4/2016'
	And the last report period end is '12/10/2016'
	And the next report period start is '12/11/2016'
	And the next report period end is '12/17/2016'
	And the next run is '12/20/2016'

Scenario: Broadcast Scheduled Reservation Frequency Weekly Run On Sunday Week Starts On Monday
Given I have a broadcast scheduled for 'Reservation'
	And the broadcast frequency is 'Weekly'
	And the report run day is 'Sunday'
	And the week starts on 'Monday'
	And the current report period start is '12/19/2016'
	And the current report period end is '12/25/2016'
	And the current next run is '12/18/2016'
	And the actual time the broadcast runs is '12/18/2016 00:05:00'
	And the broadcast last ran on '12/11/2016 00:05:00'
	And the current last report period start is '12/12/2016'
	And the current last report period end is '12/18/2016'
When I calculate the new timing
Then the last report period start is '12/19/2016'
	And the last report period end is '12/25/2016'
	And the next report period start is '12/26/2016'
	And the next report period end is '1/1/2017'
	And the next run is '12/25/2016'

Scenario: Broadcast Scheduled Back Office Frequency Bi-Weekly Run On Tuesday Week Starts On Monday
Given I have a broadcast scheduled for 'Back Office'
	And the broadcast frequency is 'Bi-Weekly'
	And the report run day is 'Tuesday'
	And the week starts on 'Sunday'
	And the current report period start is '12/26/2016'
	And the current report period end is '1/8/2017'
	And the current next run is '1/10/2017'
	And the actual time the broadcast runs is '1/10/2017 00:05:00'
	And the broadcast last ran on '12/27/2016 00:05:00'
	And the current last report period start is '12/12/2016'
	And the current last report period end is '12/25/2016'
When I calculate the new timing
Then the last report period start is '12/26/2016'
	And the last report period end is '1/8/2017'
	And the next report period start is '1/9/2017'
	And the next report period end is '1/22/2017'
	And the next run is '1/24/2017'

Scenario: Broadcast Scheduled Reservation Frequency Bi-Weekly Run On Tuesday Week Starts On Monday
Given I have a broadcast scheduled for 'Reservation'
	And the broadcast frequency is 'Bi-Weekly'
	And the report run day is 'Tuesday'
	And the week starts on 'Monday'
	And the current report period start is '1/23/2017'
	And the current report period end is '2/5/2017'
	And the current next run is '1/17/2017'
	And the actual time the broadcast runs is '1/17/2017 00:05:00'
	And the broadcast last ran on '1/3/2017 00:05:00'
	And the current last report period start is '1/9/2017'
	And the current last report period end is '1/22/2017'
When I calculate the new timing
Then the last report period start is '1/23/2017'
	And the last report period end is '2/5/2017'
	And the next report period start is '2/6/2017'
	And the next report period end is '2/19/2017'
	And the next run is '1/31/2017'

Scenario: Broadcast Scheduled Reservation Frequency Weekly Run On Tuesday Week Starts On Sunday
Given I have a broadcast scheduled for 'Reservation'
	And the broadcast frequency is 'Weekly'
	And the report run day is 'Tuesday'
	And the week starts on 'Sunday'
	And the current report period start is '12/25/2016'
	And the current report period end is '12/31/2016'
	And the current next run is '12/20/2016'
	And the actual time the broadcast runs is '12/20/2016 00:05:00'
	And the broadcast last ran on '12/13/2016 00:05:00'
	And the current last report period start is '12/18/2016'
	And the current last report period end is '12/24/2016'
When I calculate the new timing
Then the last report period start is '12/25/2016'
	And the last report period end is '12/31/2016'
	And the next report period start is '1/1/2017'
	And the next report period end is '1/7/2017'
	And the next run is '12/27/2016'

Scenario: Broadcast Scheduled Back Office Frequency Daily Prior Business Day
Given I have a broadcast scheduled for 'Back Office'
	And the broadcast frequency is 'Daily - Prior Business Day'
	And the current report period start is '12/12/2016'
	And the current report period end is '12/12/2016'
	And the current next run is '12/13/2016'
	And the actual time the broadcast runs is '12/13/2016 00:05:00'
	And the broadcast last ran on '12/12/2016 05:00:00'
	And the current last report period start is '12/11/2016'
	And the current last report period end is '12/11/2016'
When I calculate the new timing
Then the last report period start is '12/12/2016'
	And the last report period end is '12/12/2016'
	And the next report period start is '12/13/2016'
	And the next report period end is '12/13/2016'
	And the next run is '12/14/2016'

Scenario: Broadcast Scheduled Back Office Frequency Daily Next Business Day
Given I have a broadcast scheduled for 'Back Office'
	And the broadcast frequency is 'Daily - Next Business Day'
	And the current report period start is '12/15/2016'
	And the current report period end is '12/15/2016'
	And the current next run is '12/14/2016'
	And the actual time the broadcast runs is '12/14/2016 05:00:00'
	And the broadcast last ran on '12/13/2016 05:00:00'
	And the current last report period start is '12/14/2016'
	And the current last report period end is '12/14/2016'
When I calculate the new timing
Then the last report period start is '12/15/2016'
	And the last report period end is '12/15/2016'
	And the next report period start is '12/16/2016'
	And the next report period end is '12/16/2016'
	And the next run is '12/15/2016'

Scenario: Broadcast Scheduled Back Office Frequency Current Day
Given I have a broadcast scheduled for 'Back Office'
	And the broadcast frequency is 'Current Day'
	And the current report period start is '12/13/2016'
	And the current report period end is '12/13/2016'
	And the current next run is '12/13/2016'
	And the actual time the broadcast runs is '12/13/2016 05:00:00'
	And the broadcast last ran on '12/12/2016 05:00:00'
	And the current last report period start is '12/12/2016'
	And the current last report period end is '12/12/2016'
When I calculate the new timing
Then the last report period start is '12/13/2016'
	And the last report period end is '12/13/2016'
	And the next report period start is '12/14/2016'
	And the next report period end is '12/14/2016'
	And the next run is '12/14/2016'

Scenario: Broadcast Scheduled Reservation Frequency Current Day
Given I have a broadcast scheduled for 'Reservation'
	And the broadcast frequency is 'Current Day'
	And the current report period start is '12/14/2016'
	And the current report period end is '12/14/2016'
	And the current next run is '12/14/2016'
	And the actual time the broadcast runs is '12/14/2016 00:05:00'
	And the broadcast last ran on '12/13/2016 00:05:00'
	And the current last report period start is '12/13/2016'
	And the current last report period end is '12/13/2016'
When I calculate the new timing
Then the last report period start is '12/14/2016'
	And the last report period end is '12/14/2016'
	And the next report period start is '12/15/2016'
	And the next report period end is '12/15/2016'
	And the next run is '12/15/2016'

Scenario: Broadcast Scheduled Back Office Frequency Quarterly
Given I have a broadcast scheduled for 'Back Office'
	And the broadcast frequency is 'Quarterly'
	And the day of the month the report runs on is '15'
	And the first month of the year is 'January'
	And the current report period start is '1/1/2016'
	And the current report period end is '3/31/2016'
	And the current next run is '4/15/2016'
	And the actual time the broadcast runs is '4/15/2016 00:05:00'
	And the broadcast last ran on '1/15/2016 00:05:00'
	And the current last report period start is '10/1/2015'
	And the current last report period end is '12/31/2015'
When I calculate the new timing
Then the last report period start is '1/1/2016'
	And the last report period end is '3/31/2016'
	And the next report period start is '4/1/2016'
	And the next report period end is '6/30/2016'
	And the next run is '7/15/2016'

Scenario: Broadcast Scheduled Reservation Frequency Quarterly
Given I have a broadcast scheduled for 'Reservation'
	And the broadcast frequency is 'Quarterly'
	And the day of the month the report runs on is '15'
	And the first month of the year is 'January'
	And the current report period start is '1/1/2016'
	And the current report period end is '3/31/2016'
	And the current next run is '4/15/2016'
	And the actual time the broadcast runs is '4/15/2016 00:05:00'
	And the broadcast last ran on '1/15/2016 00:05:00'
	And the current last report period start is '10/1/2015'
	And the current last report period end is '12/31/2015'
When I calculate the new timing
Then the last report period start is '1/1/2016'
	And the last report period end is '3/31/2016'
	And the next report period start is '4/1/2016'
	And the next report period end is '6/30/2016'
	And the next run is '7/15/2016'

Scenario: Broadcast Scheduled Back Office Frequency SemiAnnual
Given I have a broadcast scheduled for 'Back Office'
	And the broadcast frequency is 'SemiAnnual'
	And the day of the month the report runs on is '15'
	And the first month of the year is 'January'
	And the current report period start is '1/1/2016'
	And the current report period end is '6/30/2016'
	And the current next run is '7/15/2016'
	And the actual time the broadcast runs is '7/15/2016 00:05:00'
	And the broadcast last ran on '1/15/2016 00:05:00'
	And the current last report period start is '7/1/2015'
	And the current last report period end is '12/31/2015'
When I calculate the new timing
Then the last report period start is '1/1/2016'
	And the last report period end is '6/30/2016'
	And the next report period start is '7/1/2016'
	And the next report period end is '12/31/2016'
	And the next run is '1/15/2017'

Scenario: Broadcast Scheduled Reservation Frequency SemiAnnual
Given I have a broadcast scheduled for 'Reservation'
	And the broadcast frequency is 'SemiAnnual'
	And the day of the month the report runs on is '15'
	And the first month of the year is 'January'
	And the current report period start is '1/1/2016'
	And the current report period end is '6/30/2016'
	And the current next run is '7/15/2016'
	And the actual time the broadcast runs is '7/15/2016 00:05:00'
	And the broadcast last ran on '1/15/2016 00:05:00'
	And the current last report period start is '7/1/2015'
	And the current last report period end is '12/31/2015'
When I calculate the new timing
Then the last report period start is '1/1/2016'
	And the last report period end is '6/30/2016'
	And the next report period start is '7/1/2016'
	And the next report period end is '12/31/2016'
	And the next run is '1/15/2017'

Scenario: Broadcast Scheduled Back Office Frequency Annual
Given I have a broadcast scheduled for 'Back Office'
	And the broadcast frequency is 'Annual'
	And the day of the month the report runs on is '15'
	And the first month of the year is 'January'
	And the current report period start is '1/1/2015'
	And the current report period end is '12/31/2015'
	And the current next run is '1/15/2016'
	And the actual time the broadcast runs is '1/15/2016 00:05:00'
	And the broadcast last ran on '1/15/2016 00:05:00'
	And the current last report period start is '1/1/2014'
	And the current last report period end is '12/31/2014'
When I calculate the new timing
Then the last report period start is '1/1/2015'
	And the last report period end is '12/31/2015'
	And the next report period start is '1/1/2016'
	And the next report period end is '12/31/2016'
	And the next run is '1/15/2017'

Scenario: Broadcast Scheduled Reservation Frequency Annual
Given I have a broadcast scheduled for 'Reservation'
	And the broadcast frequency is 'Annual'
	And the day of the month the report runs on is '15'
	And the first month of the year is 'January'
	And the current report period start is '1/1/2015'
	And the current report period end is '12/31/2015'
	And the current next run is '1/15/2016'
	And the actual time the broadcast runs is '1/15/2016 00:05:00'
	And the broadcast last ran on '1/15/2016 00:05:00'
	And the current last report period start is '1/1/2014'
	And the current last report period end is '12/31/2014'
When I calculate the new timing
Then the last report period start is '1/1/2015'
	And the last report period end is '12/31/2015'
	And the next report period start is '1/1/2016'
	And the next report period end is '12/31/2016'
	And the next run is '1/15/2017'

Scenario: Broadcast Scheduled Reservation Previous Day Frequency Daily
Given I have a broadcast scheduled for 'Reservation Previous Day'
	And the broadcast frequency is 'Daily'
	And the current report period start is '12/13/2016'
	And the current report period end is '12/13/2016'
	And the current next run is '12/14/2016'
	And the actual time the broadcast runs is '12/14/2016 00:05:00'
	And the broadcast last ran on '12/13/2016 00:05:00'
	And the current last report period start is '12/12/2016'
	And the current last report period end is '12/12/2016'
When I calculate the new timing
Then the last report period start is '12/13/2016'
	And the last report period end is '12/13/2016'
	And the next report period start is '12/14/2016'
	And the next report period end is '12/14/2016'
	And the next run is '12/15/2016'

Scenario: Broadcast Scheduled Reservation Previous Week Frequency Weekly 
Given I have a broadcast scheduled for 'Reservation Previous Week'
	And the broadcast frequency is 'Weekly'
	And the report run day is 'Sunday'
	And the week starts on 'Sunday'
	And the current report period start is '12/4/2016'
	And the current report period end is '12/10/2016'
	And the current next run is '12/11/2016'
	And the actual time the broadcast runs is '12/11/2016 00:05:00'
	And the broadcast last ran on '12/4/2016 00:05:00'
	And the current last report period start is '11/27/2016'
	And the current last report period end is '12/3/2016'
When I calculate the new timing
Then the last report period start is '12/4/2016'
	And the last report period end is '12/10/2016'
	And the next report period start is '12/11/2016'
	And the next report period end is '12/17/2016'
	And the next run is '12/18/2016'

Scenario: Broadcast Scheduled Reservation Previous Month Frequency Monthly 
Given I have a broadcast scheduled for 'Reservation Previous Month'
	And the broadcast frequency is 'Monthly'
	And the day of the month the report runs on is '15'
	And the month starts on day '1'
	And the current report period start is '11/1/2016'
	And the current report period end is '11/30/2016'
	And the current next run is '12/15/2016'
	And the actual time the broadcast runs is '12/15/2016 00:05:00'
	And the broadcast last ran on '11/15/2016 00:05:00'
	And the current last report period start is '10/1/2016'
	And the current last report period end is '10/31/2016'
When I calculate the new timing
Then the last report period start is '11/1/2016'
	And the last report period end is '11/30/2016'
	And the next report period start is '12/1/2016'
	And the next report period end is '12/31/2016'
	And the next run is '1/15/2017'

Scenario: Broadcast Scheduled Back Office Next Week Frequency Weekly 
Given I have a broadcast scheduled for 'Back Office Next Week'
	And the broadcast frequency is 'Weekly'
	And the report run day is 'Sunday'
	And the week starts on 'Monday'
	And the current report period start is '12/19/2016'
	And the current report period end is '12/25/2016'
	And the current next run is '12/18/2016'
	And the actual time the broadcast runs is '12/18/2016 00:05:00'
	And the broadcast last ran on '12/11/2016 00:05:00'
	And the current last report period start is '12/12/2016'
	And the current last report period end is '12/18/2016'
When I calculate the new timing
Then the last report period start is '12/19/2016'
	And the last report period end is '12/25/2016'
	And the next report period start is '12/26/2016'
	And the next report period end is '1/1/2017'
	And the next run is '12/25/2016'

Scenario: Broadcast Scheduled Back Office Previous Day Frequency Daily 
Given I have a broadcast scheduled for 'Back Office Previous Day'
	And the broadcast frequency is 'Daily'
	And the current report period start is '12/14/2016'
	And the current report period end is '12/14/2016'
	And the current next run is '12/15/2016'
	And the actual time the broadcast runs is '12/15/2016 00:05:00'
	And the broadcast last ran on '12/14/2016 00:05:00'
	And the current last report period start is '12/13/2016'
	And the current last report period end is '12/13/2016'
When I calculate the new timing
Then the last report period start is '12/14/2016'
	And the last report period end is '12/14/2016'
	And the next report period start is '12/15/2016'
	And the next report period end is '12/15/2016'
	And the next run is '12/16/2016'

Scenario: Broadcast Scheduled Reservation Mon Wed Fri For Next 1 Days Initial Next Run Is a Friday
Given I have a broadcast scheduled for 'Reservation Mon-Wed-Fri'
	And the number of report days is '1'
	And the current report period start is '12/16/2016'
	And the current report period end is '12/16/2016'
	And the current next run is '12/16/2016'
	And the actual time the broadcast runs is '12/16/2016 00:05:00'
	And the broadcast last ran on '12/14/2016 00:05:00'
	And the current last report period start is '12/14/2016'
	And the current last report period end is '12/14/2016'
When I calculate the new timing
Then the last report period start is '12/16/2016'
	And the last report period end is '12/16/2016'
	And the next report period start is '12/19/2016'
	And the next report period end is '12/19/2016'
	And the next run is '12/19/2016'

Scenario: Broadcast Scheduled Reservation Mon Wed Fri For Next 4 Days Initial Next Run Is a Monday
Given I have a broadcast scheduled for 'Reservation Mon-Wed-Fri'
	And the number of report days is '4'
	And the current report period start is '12/12/2016'
	And the current report period end is '12/15/2016'
	And the current next run is '12/12/2016'
	And the actual time the broadcast runs is '12/12/2016 00:05:00'
	And the broadcast last ran on '12/9/2016 00:05:00'
	And the current last report period start is '12/9/2016'
	And the current last report period end is '12/12/2016'
When I calculate the new timing
Then the last report period start is '12/12/2016'
	And the last report period end is '12/15/2016'
	And the next report period start is '12/14/2016'
	And the next report period end is '12/17/2016'
	And the next run is '12/14/2016'

Scenario: Broadcast Scheduled Reservation Sun Tue Thu For Next 1 Days Initial Next Run Is a Sunday
Given I have a broadcast scheduled for 'Reservation Sun-Tue-Thu'
	And the number of report days is '1'
	And the current report period start is '12/18/2016'
	And the current report period end is '12/18/2016'
	And the current next run is '12/18/2016'
	And the actual time the broadcast runs is '12/18/2016 00:05:00'
	And the broadcast last ran on '12/15/2016 00:05:00'
	And the current last report period start is '12/15/2016'
	And the current last report period end is '12/15/2016'
When I calculate the new timing
Then the last report period start is '12/18/2016'
	And the last report period end is '12/18/2016'
	And the next report period start is '12/20/2016'
	And the next report period end is '12/20/2016'
	And the next run is '12/20/2016'

Scenario: Broadcast Scheduled Reservation Sun Tue Thu For Next 5 Days Initial Next Run Is a Tuesday
Given I have a broadcast scheduled for 'Reservation Sun-Tue-Thu'
	And the number of report days is '5'
	And the current report period start is '12/13/2016'
	And the current report period end is '12/17/2016'
	And the current next run is '12/13/2016'
	And the actual time the broadcast runs is '12/13/2016 00:05:00'
	And the broadcast last ran on '12/11/2016 00:05:00'
	And the current last report period start is '12/11/2016'
	And the current last report period end is '12/15/2016'
When I calculate the new timing
Then the last report period start is '12/13/2016'
	And the last report period end is '12/17/2016'
	And the next report period start is '12/15/2016'
	And the next report period end is '12/19/2016'
	And the next run is '12/15/2016'

Scenario: Broadcast Scheduled Reservation Tue Thu Sat Next 2 Days Initial Next Run Is A Thursday
Given I have a broadcast scheduled for 'Reservation Tue-Thu-Sat'
	And the number of report days is '2'
	And the current report period start is '12/15/2016'
	And the current report period end is '12/16/2016'
	And the current next run is '12/15/2016'
	And the actual time the broadcast runs is '12/15/2016 00:05:00'
	And the broadcast last ran on '12/13/2016 00:05:00'
	And the current last report period start is '12/13/2016'
	And the current last report period end is '12/14/2016'
When I calculate the new timing
Then the last report period start is '12/15/2016'
	And the last report period end is '12/16/2016'
	And the next report period start is '12/17/2016'
	And the next report period end is '12/18/2016'
	And the next run is '12/17/2016'

Scenario: Broadcast Scheduled Reservation Tue Thu Sat Next 3 Days Initial Next Run Is A Saturday
Given I have a broadcast scheduled for 'Reservation Tue-Thu-Sat'
	And the number of report days is '3'
	And the current report period start is '12/17/2016'
	And the current report period end is '12/19/2016'
	And the current next run is '12/17/2016'
	And the actual time the broadcast runs is '12/17/2016 00:05:00'
	And the broadcast last ran on '12/15/2016 00:05:00'
	And the current last report period start is '12/15/2016'
	And the current last report period end is '12/17/2016'
When I calculate the new timing
Then the last report period start is '12/17/2016'
	And the last report period end is '12/19/2016'
	And the next report period start is '12/20/2016'
	And the next report period end is '12/22/2016'
	And the next run is '12/20/2016'

Scenario: Broadcast Scheduled Reservation Weekly Runs On Sunday For Next 3 Days
Given I have a broadcast scheduled for 'Reservation Weekly'
	And the report run day is 'Sunday'
	And the number of report days is '3'
	And the current report period start is '12/19/2016'
	And the current report period end is '12/21/2016'
	And the current next run is '12/18/2016'
	And the actual time the broadcast runs is '12/18/2016 00:05:00'
	And the broadcast last ran on '12/11/2016 00:05:00'
	And the current last report period start is '12/12/2016'
	And the current last report period end is '12/14/2016'
When I calculate the new timing
Then the last report period start is '12/19/2016'
	And the last report period end is '12/21/2016'
	And the next report period start is '12/26/2016'
	And the next report period end is '12/28/2016'
	And the next run is '12/25/2016'

Scenario: Broadcast Scheduled Reservation Weekly Runs On Tuesday For Next 2 Days
Given I have a broadcast scheduled for 'Reservation Weekly'
	And the report run day is 'Tuesday'
	And the number of report days is '2'
	And the current report period start is '12/21/2016'
	And the current report period end is '12/22/2016'
	And the current next run is '12/20/2016'
	And the actual time the broadcast runs is '12/20/2016 00:05:00'
	And the broadcast last ran on '12/13/2016 00:05:00'
	And the current last report period start is '12/14/2016'
	And the current last report period end is '12/15/2016'
When I calculate the new timing
Then the last report period start is '12/21/2016'
	And the last report period end is '12/22/2016'
	And the next report period start is '12/28/2016'
	And the next report period end is '12/29/2016'
	And the next run is '12/27/2016'

Scenario: Broadcast Scheduled Reservation Daily For Next 2 Days
Given I have a broadcast scheduled for 'Reservation Daily'
	And the number of report days is '2'
	And the current report period start is '12/13/2016'
	And the current report period end is '12/15/2016'
	And the current next run is '12/13/2016'
	And the actual time the broadcast runs is '12/13/2016 00:05:00'
	And the broadcast last ran on '12/12/2016 00:05:00'
	And the current last report period start is '12/12/2016'
	And the current last report period end is '12/14/2016'
When I calculate the new timing
Then the last report period start is '12/13/2016'
	And the last report period end is '12/15/2016'
	And the next report period start is '12/14/2016'
	And the next report period end is '12/16/2016'
	And the next run is '12/14/2016'

Scenario: Broadcast Scheduled YTD Back Office, run monthly
Given I have a broadcast scheduled for 'YTD Back Office, run monthly'
	And the day of the month the report runs on is '15'
	And the month starts on day '1'
	And the current report period start is '1/1/2016'
	And the current report period end is '11/30/2016'
	And the current next run is '12/15/2016'
	And the actual time the broadcast runs is '12/15/2016 00:05:00'
	And the broadcast last ran on '11/15/2016 00:05:00'
	And the current last report period start is '1/1/2016'
	And the current last report period end is '10/31/2016'
When I calculate the new timing
Then the last report period start is '1/1/2016'
	And the last report period end is '11/30/2016'
	And the next report period start is '1/1/2016'
	And the next report period end is '12/31/2016'
	And the next run is '1/15/2017'

Scenario: Broadcast Scheduled YTD Back Office, run weekly
Given I have a broadcast scheduled for 'YTD Back Office, run weekly'
	And the report run day is 'Sunday'
	And the week starts on 'Sunday'
	And the current report period start is '1/1/2016'
	And the current report period end is '12/10/2016'
	And the current next run is '12/11/2016'
	And the actual time the broadcast runs is '12/15/2016 00:05:00'
	And the broadcast last ran on '11/15/2016 00:05:00'
	And the current last report period start is '1/1/2016'
	And the current last report period end is '12/3/2016'
When I calculate the new timing
Then the last report period start is '1/1/2016'
	And the last report period end is '12/10/2016'
	And the next report period start is '1/1/2016'
	And the next report period end is '12/17/2016'
	And the next run is '12/18/2016'

Scenario: Broadcast Scheduled YTD Reservation, run monthly
Given I have a broadcast scheduled for 'YTD Reservation, run monthly'
	And the day of the month the report runs on is '15'
	And the month starts on day '1'
	And the current report period start is '1/1/2016'
	And the current report period end is '11/30/2016'
	And the current next run is '12/15/2016'
	And the actual time the broadcast runs is '12/15/2016 00:05:00'
	And the broadcast last ran on '11/15/2016 00:05:00'
	And the current last report period start is '1/1/2016'
	And the current last report period end is '10/31/2016'
When I calculate the new timing
Then the last report period start is '1/1/2016'
	And the last report period end is '11/30/2016'
	And the next report period start is '1/1/2016'
	And the next report period end is '12/31/2016'
	And the next run is '1/15/2017'

Scenario: Broadcast Scheduled YTD Reservation, run weekly
Given I have a broadcast scheduled for 'YTD Reservation, run weekly'
	And the report run day is 'Sunday'
	And the week starts on 'Sunday'
	And the current report period start is '1/1/2016'
	And the current report period end is '12/10/2016'
	And the current next run is '12/11/2016'
	And the actual time the broadcast runs is '12/11/2016 00:05:00'
	And the broadcast last ran on '12/4/2016 00:05:00'
	And the current last report period start is '1/1/2016'
	And the current last report period end is '12/3/2016'
When I calculate the new timing
Then the last report period start is '1/1/2016'
	And the last report period end is '12/10/2016'
	And the next report period start is '1/1/2016'
	And the next report period end is '12/17/2016'
	And the next run is '12/18/2016'

Scenario: Broadcast Scheduled MTD Back Office, run weekly
Given I have a broadcast scheduled for 'MTD Back Office, run weekly'
	And the report run day is 'Sunday'
	And the week starts on 'Sunday'
	And the current report period start is '12/1/2016'
	And the current report period end is '12/10/2016'
	And the current next run is '12/11/2016'
	And the actual time the broadcast runs is '12/11/2016 00:05:00'
	And the broadcast last ran on '12/4/2016 00:05:00'
	And the current last report period start is '12/1/2016'
	And the current last report period end is '12/3/2016'
When I calculate the new timing
Then the last report period start is '12/1/2016'
	And the last report period end is '12/10/2016'
	And the next report period start is '12/1/2016'
	And the next report period end is '12/17/2016'
	And the next run is '12/18/2016'

Scenario: Broadcast Scheduled MTD Reservation, run weekly
Given I have a broadcast scheduled for 'MTD Reservation, run weekly'
	And the report run day is 'Sunday'
	And the week starts on 'Sunday'
	And the current report period start is '12/1/2016'
	And the current report period end is '12/10/2016'
	And the current next run is '12/11/2016'
	And the actual time the broadcast runs is '12/11/2016 00:05:00'
	And the broadcast last ran on '12/4/2016 00:05:00'
	And the current last report period start is '12/1/2016'
	And the current last report period end is '12/3/2016'
When I calculate the new timing
Then the last report period start is '12/1/2016'
	And the last report period end is '12/10/2016'
	And the next report period start is '12/1/2016'
	And the next report period end is '12/17/2016'
	And the next run is '12/18/2016'

Scenario: Broadcast Scheduled MTD Reservation, run daily
Given I have a broadcast scheduled for 'MTD Reservation, run daily'
	And the current report period start is '12/1/2016'
	And the current report period end is '12/14/2016'
	And the current next run is '12/15/2016'
	And the actual time the broadcast runs is '12/15/2016 00:05:00'
	And the broadcast last ran on '12/14/2016 00:05:00'
	And the current last report period start is '12/1/2016'
	And the current last report period end is '12/13/2016'
When I calculate the new timing
Then the last report period start is '12/1/2016'
	And the last report period end is '12/14/2016'
	And the next report period start is '12/1/2016'
	And the next report period end is '12/15/2016'
	And the next run is '12/16/2016'

Scenario: Broadcast Scheduled MTD Back Office, run daily
Given I have a broadcast scheduled for 'MTD Back Office, run daily'
	And the current report period start is '12/1/2016'
	And the current report period end is '12/14/2016'
	And the current next run is '12/15/2016'
	And the actual time the broadcast runs is '12/15/2016 00:05:00'
	And the broadcast last ran on '12/14/2016 00:05:00'
	And the current last report period start is '12/1/2016'
	And the current last report period end is '12/13/2016'
When I calculate the new timing
Then the last report period start is '12/1/2016'
	And the last report period end is '12/14/2016'
	And the next report period start is '12/1/2016'
	And the next report period end is '12/15/2016'
	And the next run is '12/16/2016'


Scenario: Broadcast Scheduled Reservation Daily Every X Hours Run Every 2 Hours Run Only For New Data Not Checked
Given I have a broadcast scheduled for 'Reservation'
	And the broadcast frequency is 'Daily Every X Hours'
	And the hourly interval to run is '2'
	And the current report period start is '12/13/2016 00:00:00'
	And the current report period end is '12/13/2016 02:00:00'
	And the current next run is '12/13/2016 02:00:05'
	And the actual time the broadcast runs is '12/13/2016 02:00:05'
	And the broadcast last ran on '12/13/2016 00:00:05'
	And the current last report period start is '12/12/2016 22:00:00'
	And the current last report period end is '12/13/2016 00:00:00'
	And the broadcast 'is not' set to run for data updated since the last time the broadcast ran
When I calculate the new timing
Then the last report period start is '12/13/2016 00:00:00'
	And the last report period end is '12/13/2016 02:00:00'
	And the next report period start is '12/13/2016 02:00:00'
	And the next report period end is '12/13/2016 04:00:00'
	And the next run is '12/13/2016 04:00:05'

Scenario: Broadcast Scheduled Reservation Daily Every X Minutes Runs Every 30 Minutes Not For Only New Data
Given I have a broadcast scheduled for 'Reservation'
	And the broadcast frequency is 'Daily Every X Minutes'
	And the minute interval to run is '30'
	And the current report period start is '12/13/2016 23:30:00'
	And the current report period end is '12/14/2016 00:00:00'
	And the current next run is '12/14/2016 00:00:00'
	And the actual time the broadcast runs is '12/14/2016 0:00:01'
	And the broadcast last ran on '12/13/2016 23:30:01'
	And the current last report period start is '12/13/2016 23:00:00'
	And the current last report period end is '12/13/2016 23:30:00'
	And the broadcast 'is not' set to run for data updated since the last time the broadcast ran
When I calculate the new timing
Then the last report period start is '12/13/2016 23:30:00'
	And the last report period end is '12/14/2016 00:00:00'
	And the next report period start is '12/14/2016 00:00:00'
	And the next report period end is '12/14/2016 00:30:00'
	And the next run is '12/14/2016 00:30:00'

# A variable run time that is set to "run this broadcast for data upated since the last time the broadcast ran" follows the below logic
#	- at the start of the broadcast run
#		- the report period start is set to the last time the broadcast ran
#		- the report period end is set to the current time (the time the broadcast is running)
#	- after the broadcast is run
#		- the report period start is incremented by x, where x is the variable minutes/hours specified by the user
#		- the report period end is incremented by x, where x is the variable minutes/hours specified by the user

